#
# Huawei Switch Configuration
# Generated by Switch Migration Tool
# Hostname: {{ hostname }}
#

system-view
sysname {{ hostname }}

# Configure admin user
aaa
 local-user admin password irreversible-cipher {{ admin_password }}
 local-user admin privilege level 15
 local-user admin service-type terminal ssh
 quit

# Configure VTY for remote access
user-interface vty 0 4
 authentication-mode aad
 user privilege level 15
 idle-timeout 30 0
 quit

{% for interface in interfaces %}
# Interface {{ interface.name }}
interface {{ interface.name }}
{% if interface.description %}
 description {{ interface.description }}
{% endif %}
{% if interface.port_link_type %}
 port link-type {{ interface.port_link_type }}
{% endif %}
{% if interface.port_link_type == 'access' and interface.vlan %}
 port default vlan {{ interface.vlan }}
{% endif %}
{% if interface.port_link_type == 'trunk' and interface.trunk_vlans %}
 port trunk allow-pass vlan {{ interface.trunk_vlans|join(' ') }}
{% endif %}
{% if interface.speed %}
 speed {{ interface.speed }}
{% endif %}
{% if interface.duplex %}
 duplex {{ interface.duplex }}
{% endif %}
 quit

{% endfor %}

quit
save
y
